<!-- concentration type table --> 
<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
	<div class="card">
		<div class="card-block">
          <div class="card-title">All Control Types</div>
          <div class="card-text">
            <!-- add Control Types button -->
            <div class="row">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="btn-group">
                  <button class="btn btn-sm" (click)="showAddModal()">Add Control Type</button>
                </div>
              </div>
            </div>
            <!-- add Control Type card -->
            <div class="row">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" *ngIf="showHideAdd">
                <div class="card">
                  <form id="addCTForm" class="compact" [formGroup]="addCTForm" (ngSubmit)="onSubmitCT('add', addCTForm.value)">
                    <div class="card-block">
                      <div class="card-title">Add Control Type</div>
                      <div class="card-text">
                        <clr-alert [clrAlertType]="'alert-danger'" *ngIf="showCTCreateError">
                          <div clr-alert-item class="alert-item">
                            <span class="alert-text">Submission error. Control Type not submitted. {{errorMessage}}</span>
                            <div class="alert-actions">
                              <a class="alert-action" (click)="onSubmitCT('add', addCTForm.value)">Try again</a>
                            </div>
                          </div>
                        </clr-alert>
  
                        <clr-alert [clrAlertType]="'alert-success'" *ngIf="showCTCreateSuccess">
                          <div clr-alert-item class="alert-item">
                            <span class="alert-text">Control Type successfully submitted</span>
                            <div class="alert-actions">
                              <a class="alert-action" (click)="showHideAdd = false; showCTCreateSuccess = false">Close</a>
                            </div>
                          </div>
                        </clr-alert>
  
  
                        <section class="form-block">
                          <div class="form-group">
                            <label>Name</label>
                            <label for="name" aria-haspopup="true" role="tooltip" class="tooltip tooltip-validation tooltip-sm" [class.invalid]="addCTForm.get('name').invalid && (addCTForm.get('name').dirty || addCTForm.get('name').touched)">
                              <input id="name" type="text" class="form-control" formControlName="name" size="30">
                              <span class="tooltip-content">Name is required.</span>
                            </label>
                          </div>
                          <div class="form-group">
                            <label>Abbreviation</label>
                            <label for="abbreviation" aria-haspopup="true" role="tooltip" class="tooltip tooltip-sm">
                              <input id="abbreviation" type="text" class="form-control" formControlName="abbreviation" size="30">
                            </label>
                          </div>
                        </section>
  
                        <br clear="all" />
                      </div>
                    </div>
                    <div class="card-footer">
                      <button class="btn btn-primary" type="submit" [disabled]="addCTForm.invalid" [clrLoading]="submitLoading">Submit</button>
                      <button class="btn btn-info" (click)="showHideAdd = !showHideAdd">Cancel</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
  
            <clr-datagrid [(clrDgSingleSelected)]="selectedCT">
              <!-- edit and delete CT buttons -->
              <clr-dg-action-bar>
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-secondary" [disabled]="!selectedCT" (click)="editCT(selectedCT)">
                    <clr-icon shape="note-edit" size="16"></clr-icon> Edit Control Type</button>
                </div>
                <div class="btn-group">
                  <button type="button" class="btn btn-sm btn-secondary" [disabled]="!selectedCT" (click)="deleteCT(selectedCT)">
                    <clr-icon shape="trash" size="16"></clr-icon> Delete Control Type</button>
                </div>
              </clr-dg-action-bar>
  
              <!-- table of all CTs -->
              <clr-dg-column [clrDgField]="'id'">
                <ng-container *clrDgHideableColumn="{hidden: false}">
                    Control Type ID
                </ng-container>
              </clr-dg-column>
  
              <clr-dg-column [clrDgField]="'name'">
                <ng-container *clrDgHideableColumn="{hidden: false}">
                    Control Type Name
                </ng-container>
              </clr-dg-column>
  
              <clr-dg-column [clrDgField]="'description'">
                <ng-container *clrDgHideableColumn="{hidden: false}">
                    Control Type Abbreviation
                </ng-container>
              </clr-dg-column>
  
              <clr-dg-row *clrDgItems="let c of ControlTypes" [clrDgItem]="c">
                <clr-dg-cell>{{c.id}}</clr-dg-cell>
                <clr-dg-cell>{{c.name}}</clr-dg-cell>
                <clr-dg-cell>{{c.abbreviation}}</clr-dg-cell>
              </clr-dg-row>
            </clr-datagrid>
          </div>
          <!-- end main control type card text -->
        </div>
        <!-- end main control type card block -->
      </div>
      <!-- end main control type card -->
    </div>
  
    <!-- edit control type Modal -->
    <clr-modal [(clrModalOpen)]="showHideEdit">
      <h3 class="modal-title">Edit Control Type</h3>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <clr-alert [clrAlertType]="'alert-danger'" *ngIf="showCTEditError">
              <div clr-alert-item class="alert-item">
                <span class="alert-text">Submission error. Control Type not edited.</span>
                <div class="alert-actions">
                  <a class="alert-action" (click)="onSubmitCT('edit', editCTForm.value)">Try again</a>
                </div>
              </div>
            </clr-alert>
  
            <clr-alert [clrAlertType]="'alert-success'" *ngIf="showCTEditSuccess">
              <div clr-alert-item class="alert-item">
                <span class="alert-text">Control Type successfully edited</span>
              </div>
            </clr-alert>
  
            <form id="editCTForm" class="compact" [formGroup]="editCTForm" (ngSubmit)="onSubmitCT('edit', editCTForm.value)">
              <section class="form-block">
                <label>Selected Control Type: {{selectedCTName}}</label>
                <div class="form-group">
                  <label for="CTId">Control Type ID</label>
                  <input type="text" id="CTId" size="35" formControlName="id" readonly>
                </div>
  
                <div class="form-group">
                  <label>Name</label>
                  <label for="name" aria-haspopup="true" role="tooltip" class="tooltip tooltip-validation tooltip-sm" [class.invalid]="editCTForm.get('name').invalid && (editCTForm.get('name').dirty || editCTForm.get('name').touched)">
                    <input id="name" type="text" formControlName="name" size="40">
                    <span class="tooltip-content">Name is required.</span>
                  </label>
                </div>
  
                <div class="form-group">
                  <label>Abbreviation</label>
                  <label for="abbreviation" aria-haspopup="true" role="tooltip" class="tooltip tooltip-sm">
                    <input id="abbreviation" type="text" formControlName="abbreviation" size="40">
                  </label>
                </div>
  
                <button class="btn btn-primary" type="submit" [disabled]="editCTForm.invalid" [clrLoading]="submitLoading">Save Edits</button>
                <button class="btn btn-info" (click)="showHideEdit = !showHideEdit">Cancel</button>
  
              </section>
            </form>
          </div>
        </div>
      </div>
    </clr-modal>
  
    <!-- delete Unit type Modal -->
    <clr-modal [(clrModalOpen)]="showHideDelete">
      <h3 class="modal-title">Delete Control Type</h3>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <clr-alert [clrAlertType]="'alert-danger'" *ngIf="showCTDeleteError">
              <div clr-alert-item class="alert-item">
                <span class="alert-text">Submission error. Control Type not deleted.</span>
                <div class="alert-actions">
                  <a class="alert-action" (click)="submitDelete()">Try again</a>
                </div>
              </div>
            </clr-alert>
  
            <clr-alert [clrAlertType]="'alert-success'" *ngIf="showCTDeleteSuccess">
              <div clr-alert-item class="alert-item">
                <span class="alert-text">Control Type successfully deleted.</span>
              </div>
            </clr-alert>
  
            <div *ngIf="!showCTDeleteSuccess">
              <p>Are you sure you want to delete {{selectedCTName}}</p>
  
              <button class="btn btn-primary" type="button" (click)="submitDelete()" [clrLoading]="submitLoading">Delete</button>
              <button class="btn btn-info" (click)="showHideDelete = !showHideDelete">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </clr-modal>
  <!--</div>-->